---
title: FOSS For Spectroscopy
author: Bryan A. Hanson, DePauw University
date: "`r Sys.Date()`"
output:
  html_document:
    theme: united
---

<!-- Need to add:
  * PRRFECT https://www.sciencedirect.com/science/article/abs/pii/S0169743917305257 Repo seems to be gone!
  * -->

> "Open source means everyone can see my stupid mistakes.
> Version control means everyone can see every stupid mistake I’ve ever made."[^1]


<!-- See https://kryogenix.org/code/browser/sorttable/ -->
<script src="sorttable.js"></script>

The following table collects information about free and open source software ([FOSS](https://en.wikipedia.org/wiki/Free_and_open-source_software)) for spectroscopy.  All information is taken from the respective websites and/or repositories.  Some softwares have been described in publications.  If so, a link is provided but keep in mind the document may be behind a paywall.

Unless otherwise noted, the software mentioned here:

* Is suitable for one or more of the following techniques: NMR, IR, Raman, ESR/EPR, fluorescence and UV-Vis.
* Mass *spectrometry* software is not included.
* Software for MRI is not included.

[Stanstrup *et al.*](https://www.mdpi.com/2218-1989/9/10/200) have published a comprehensive paper describing the `R` packages suitable for use in metabolomics, which partially overlaps with the information here.

The [CRAN Task View for Chemometrics & Computational Physics](https://cran.r-project.org/web/views/ChemPhys.html) includes some `R` packages listed here as well as related software.

Additions or corrections?  Please [file an issue](https://github.com/bryanhanson/FOSS4Spectroscopy/issues) with the necessary information or submit a pull request at the [repo](https://github.com/bryanhanson/FOSS4Spectroscopy).

[![Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public.](https://www.repostatus.org/badges/latest/wip.svg)](https://www.repostatus.org/#wip)
[![Build Status](https://travis-ci.com/bryanhanson/FOSS4Spectroscopy.svg?branch=master)](https://travis-ci.com/bryanhanson/FOSS4Spectroscopy)


```{r setup, echo = FALSE}
rm(list = ls())
suppressPackageStartupMessages(library("knitr"))
suppressPackageStartupMessages(library("kableExtra"))
suppressPackageStartupMessages(library("readxl"))
suppressPackageStartupMessages(library("httr"))
```

```{r inputValues, echo = FALSE}
# Please edit FOSS4Spec.xlsx to add information or make corrections.
# Please follow the conventions of existing entries for consistency.
# Remember the table in the web page is sortable so consistency in
# description and notes is especially important for users to obtain
# useful information.

DF <- read_excel("FOSS4Spec.xlsx")
DF <- as.data.frame(DF)
# shorten names for less typing
names(DF) <- c("name", "web", "repo", "pub", "lang", "desc", "notes")
```

```{r verifyURLs, echo = FALSE, eval = TRUE}
# This takes some time!
ne <- nrow(DF) # number of entries
# Check all URLs, if the site is down handle so table always looks good.
# Site URL might also just be missing from table, handle this too.
webLink <- rep(FALSE, ne) # If TRUE, there is a link in the input table
repoLink <- rep(FALSE, ne)
pubLink <- rep(FALSE, ne)
webOK <- rep(FALSE, ne) # If TRUE, URL was reachable
repoOK <- rep(FALSE, ne)
pubOK <- rep(FALSE, ne)
badWeb <- rep(FALSE, ne) # If TRUE, URL was given but not reachable: report it
badRepo <- rep(FALSE, ne)
badPub <- rep(FALSE, ne)

for (i in 1:ne) {
  if (!is.na(DF$web[i])) {
    webOK[i] <- identical(status_code(GET(DF$web[i])), 200L)
    webLink[i] <- TRUE
    if (webLink[i] != webOK[i]) badWeb[i] <- TRUE
  }
  if (!is.na(DF$repo[i])) {
    repoOK[i] <- identical(status_code(GET(DF$repo[i])), 200L)
    repoLink[i] <- TRUE
    if (repoLink[i] != repoOK[i]) badRepo[i] <- TRUE
  }
  if (!is.na(DF$pub[i])) {
    pubOK[i] <- identical(status_code(GET(DF$pub[i])), 200L)
    pubLink[i] <- TRUE
    if (pubLink[i] != pubOK[i]) badPub[i] <- TRUE
  }
}
# If URLs are bad they will still be added to the table as hyperlinks, but
# those links will give status 404.
# Write a report so maintainers can check & fix
LinkReport <- data.frame(webLink, webOK, repoLink, repoOK, pubLink, pubOK, stringsAsFactors = FALSE)
keep <- badPub | badRepo | badWeb
LinkReport <- LinkReport[keep,]
if (nrow(LinkReport) > 0) write.csv(LinkReport, row.names = FALSE, file = "BadLinks.csv")
```

```{r computeStatus, echo = FALSE, eval = FALSE}
# Use the info from checking URLs above
```

```{r processValues, echo = FALSE}
# Additional processing of the input values
# Combine name, website and pub as available to create hyperlink
namelink <- DF$name # There must be at least a name in the input table
for (i in 1:length(namelink)) {
  if (!is.na(DF$web[i])) {
    namelink[i] <- paste("[", DF$name[i], "](", DF$web[i], ")", sep = "")
  }
  if (!is.na(DF$pub[i])) {
    namelink[i] <- paste(namelink[i], " ([pub](", DF$pub[i], "))", sep = "")
  }
}
```

```{r checkStatus, echo = FALSE}
# TO-DO
# Automatically check if the software is apparently kept up-to-date

status <- rep(NA_character_, length(DF$name))

```


```{r createTable, echo = FALSE}
DF2 <- data.frame(namelink, DF$desc, DF$lang, DF$notes, status, stringsAsFactors = FALSE)
names(DF2) <- c("name", "description", "language", "notes", "[status](#status)")
```

<hr>

* *Click on a header to sort the table*
* [Abbreviations](#abbreviations) & terms below the table
* The table currently has `r nrow(DF2)` entries; the majority are `R` (`r length(DF2$language[DF2$language == "R"])`) or `Python` (`r length(DF2$language[DF2$language == "Python"])`).

```{r printTable, results = "asis", echo = FALSE}
options(knitr.kable.NA = '')
kable(DF2, table.attr = "class=\"sortable\"") %>%
  kable_styling(c("striped", "bordered", "sortable"))
```
##### Status Column: {#status}

(Coming Soon!) The status column in the table gives the year and month of the most recent:

* commit to a repository,
* activity on an issue filed in a repository,
* submission to an archival network such as CRAN,
* web site update, or
* successful continuous integration

as a proxy for regular maintenance.  Keep in mind that some software is fairly mature and thus an older status date does not necessarily mean the software is not maintained.  Follow the links to the websites for more details.

##### Abbreviations & Terms: {#abbreviations}

* __CRAN:__ [Comprehensive R Archival Network](https://cran.r-project.org/)
* __EDA:__ Exploratory data analysis (unsupervised chemometrics)
* __language:__ Most software is built on several languages. In the table, "language" refers to the language one uses to interact with the software. Some software has partial or complete interactive features.
* __nD NMR:__ n-dimensional NMR, 1D, 2D, 3D etc
* __Python:__ Multipurpose programming language [details](https://www.python.org/about/)
* __R:__ A software environment for statistical computing and graphics [details, platforms](https://www.r-project.org/)
* __VM:__ Virtual machine.  Any of several means of delivering software to run on any computer, such as VirtualBox or Docker containers.

[^1][Karl Broman] (https://kbroman.wordpress.com/2011/08/17/the-stupidest-r-code-ever/)
